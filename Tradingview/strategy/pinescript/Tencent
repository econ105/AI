//@version=5
indicator("Tencent Strategy Example", overlay=true)

// Input parameters
emaLength = input.int(20, "EMA Length")
macdFast = input.int(12, "MACD Fast Length")
macdSlow = input.int(26, "MACD Slow Length")
macdSignal = input.int(9, "MACD Signal Length")
rsiLength = input.int(14, "RSI Length")

// Price data
price = close

// EMA
ema20 = ta.ema(price, emaLength)
plot(ema20, color=color.orange, title="EMA20")

// MACD
macdLine = ta.ema(price, macdFast) - ta.ema(price, macdSlow)
signalLine = ta.ema(macdLine, macdSignal)
hist = macdLine - signalLine
plot(macdLine, color=color.blue, title="MACD")
plot(signalLine, color=color.red, title="Signal")
plot(hist, style=plot.style_histogram, color=color.green, title="MACD Histogram")

// RSI
rsi = ta.rsi(price, rsiLength)
plot(rsi, color=color.purple, title="RSI", display=display.none) // hidden by default

// Buy/Sell conditions
buySignal = ta.crossover(macdLine, signalLine) and rsi < 70 and close > ema20
sellSignal = ta.crossunder(macdLine, signalLine) and rsi > 30 and close < ema20

plotshape(buySignal, title="Buy", location=location.belowbar, color=color.green, style=shape.labelup, text="BUY")
plotshape(sellSignal, title="Sell", location=location.abovebar, color=color.red, style=shape.labeldown, text="SELL")
